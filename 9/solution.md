This is a pretty easy problem.
Find all cow groups (connected components) with DFS.
Then you can find $x_\mathrm{min}$, $y_\mathrm{min}$, $x_\mathrm{max}$, and $y_\mathrm{max}$ of a cow group to find its perimeter.
Then, find the min perimeter.