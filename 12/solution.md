I was not able to solve this problem without looking at the solution.

Basic idea of the solution was to cap off how many berries a basket can have.
Then, fill up the baskets appropriate from each tree.
You can simulate every cap off in essentially $O(N)$ time, making the final complexity somewhere around $O(N \times N\log(N))$ time.
